@page "/PMR00200"
@using PMR00200COMMON.DTO_s
@inherits R_Page

<R_StackLayout Class="ps-4 pe-4">
    @* property *@
    <R_StackLayout Row>
        <R_ItemLayout col="2">
            <R_Label>@_localizer["_labelProperty"]</R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="3">
            <R_ComboBox Data="@_viewModel._properties"
                        Value="@_viewModel._ReportParam.CPROPERTY_ID"
                        ValueField="@nameof(PropertyDTO.CPROPERTY_ID)"
                        TextField="@nameof(PropertyDTO.CPROPERTY_NAME)"
                        ValueChanged="@((string value) => ComboboxPropertyValueChanged(value))">
            </R_ComboBox>
        </R_ItemLayout>
    </R_StackLayout>

    @* dept groupbox *@
    <R_GroupBox ShowBorder>

        @* label *@
        <R_StackLayout Row>
            <R_ItemLayout col="12">
                <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_labelDepartment"]</R_Label>
            </R_ItemLayout>
        </R_StackLayout>

        @* from dept *@
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["_labelFrom"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_DEPARTMENT_ID"
                           R_ConductorSource="_conductorRef"
                           Enabled
                           CharacterCasing="R_eCharacterCasing.Upper"
                           MaxLength="int.MaxValue"
                           OnLostFocus="OnLostFocus_LookupFromDept" />
            </R_ItemLayout>
            <R_ItemLayout Class="col-1 d-flex justify-content-center">
                <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupFromDept" R_After_Open_Lookup="@AfterOpen_lookupFromDeptAsync">...</R_Lookup>
            </R_ItemLayout>
            <R_ItemLayout col="4">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_DEPARTMENT_NAME"
                           R_ConductorSource="_conductorRef"
                           Enabled="false" />
            </R_ItemLayout>
        </R_StackLayout>

        @* to dept *@
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["_labelTo"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_DEPARTMENT_ID"
                           R_ConductorSource="_conductorRef"
                           Enabled
                           CharacterCasing="R_eCharacterCasing.Upper"
                           MaxLength="int.MaxValue"
                           OnLostFocus="OnLostFocus_LookupToDept" />
            </R_ItemLayout>
            <R_ItemLayout Class="col-1 d-flex justify-content-center">
                <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupToDept" R_After_Open_Lookup="@AfterOpen_lookupToDeptAsync">...</R_Lookup>
            </R_ItemLayout>
            <R_ItemLayout col="4">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_DEPARTMENT_NAME"
                           R_ConductorSource="_conductorRef"
                           Enabled="false" />
            </R_ItemLayout>
        </R_StackLayout>
    </R_GroupBox>

    @* salesman groupbox *@
    <R_GroupBox ShowBorder>

        @* label *@
        <R_StackLayout Row>
            <R_ItemLayout col="12">
                <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_labelSalesman"]</R_Label>
            </R_ItemLayout>
        </R_StackLayout>

        @* from salesman *@
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["_labelFrom"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_SALESMAN_ID"
                           R_ConductorSource="_conductorRef"
                           Enabled
                           CharacterCasing="R_eCharacterCasing.Upper"
                           MaxLength="int.MaxValue"
                           OnLostFocus="OnLostFocus_LookupFromSalesman" />
            </R_ItemLayout>
            <R_ItemLayout Class="col-1 d-flex justify-content-center">
                <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupFromSalesman" R_After_Open_Lookup="@AfterOpen_lookupFromSalesmanAsync">...</R_Lookup>
            </R_ItemLayout>
            <R_ItemLayout col="4">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_SALESMAN_NAME"
                           R_ConductorSource="_conductorRef"
                           Enabled="false" />
            </R_ItemLayout>
        </R_StackLayout>

        @* to salesman *@
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["_labelTo"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_SALESMAN_ID"
                           R_ConductorSource="_conductorRef"
                           Enabled
                           CharacterCasing="R_eCharacterCasing.Upper"
                           MaxLength="int.MaxValue"
                           OnLostFocus="OnLostFocus_LookupToDept" />
            </R_ItemLayout>
            <R_ItemLayout Class="col-1 d-flex justify-content-center">
                <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupToDept" R_After_Open_Lookup="@AfterOpen_lookupToDeptAsync">...</R_Lookup>
            </R_ItemLayout>
            <R_ItemLayout col="4">
                <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_SALESMAN_NAME"
                           R_ConductorSource="_conductorRef"
                           Enabled="false" />
            </R_ItemLayout>
        </R_StackLayout>
    </R_GroupBox>

    @* period,filter,type *@
    <R_GroupBox>
        @* label *@
        <R_StackLayout Row>
            <R_ItemLayout col="7">
                <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_labelPeriod"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_labelReportType"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_labelFilter"]</R_Label>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Row>
            @* period *@
            <R_ItemLayout col="7">

                @* from *@
                <R_StackLayout Row>
                    <R_ItemLayout col="4">
                        <R_Label>@_localizer["_labelFrom"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_NumericTextBox Arrows="true"
                                          @bind-Value="@_viewModel._YearFromPeriod"
                                          Max="@_viewModel._PeriodYear.IMAX_YEAR"
                                          Min="@_viewModel._PeriodYear.IMAX_YEAR" />
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_ComboBox @bind-Value="@_viewModel._MonthFromPeriod"
                                    Data="_viewModel._fromPeriods"
                                    ValueField="@nameof(PeriodDtDTO.CPERIOD_NO)"
                                    TextField="@nameof(PeriodDtDTO.CPERIOD_NO)" />
                    </R_ItemLayout>
                </R_StackLayout>

                @* to *@
                <R_StackLayout Row>
                    <R_ItemLayout col="4"> <R_Label>@_localizer["_labelTo"]</R_Label></R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_NumericTextBox Arrows="true"
                                          @bind-Value="@_viewModel._YearToPeriod"
                                          Max="@_viewModel._PeriodYear.IMAX_YEAR"
                                          Min="@_viewModel._PeriodYear.IMAX_YEAR" />
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_ComboBox @bind-Value="@_viewModel._MonthToPeriod"
                                    Data="_viewModel._toPeriods"
                                    ValueField="@nameof(PeriodDtDTO.CPERIOD_NO)"
                                    TextField="@nameof(PeriodDtDTO.CPERIOD_NO)" />
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>

            @* report tyoe *@
            <R_ItemLayout col="2">
                <R_RadioGroup @ref="@_radioReportType"
                              Data="@_viewModel._radioReportTypeList"
                              @bind-Value="@_viewModel._ReportType"
                              ValueField="@nameof(ReportTypeDTO.CTYPE)"
                              TextField="@nameof(ReportTypeDTO.CTYPE_NAME)"
                              Layout="R_eRadioGroupLayout.Vertical"
                              LabelPosition="R_eRadioGroupLabelPosition.After">
                    test
                </R_RadioGroup>
            </R_ItemLayout>

            @* filter *@
            <R_ItemLayout col="3">
                <R_CheckBox @bind-Value="@_viewModel._ReportParam.LIS_OUTSTANDING" Enabled />
                <R_Label Class="ms-0">@_localizer["_checkBoxOutAgreementTrans"]</R_Label>
            </R_ItemLayout>
        </R_StackLayout>
    </R_GroupBox>

    <R_ItemLayout>
        <R_Button>@_localizer["_btnPrint"]</R_Button>
    </R_ItemLayout>
</R_StackLayout>


