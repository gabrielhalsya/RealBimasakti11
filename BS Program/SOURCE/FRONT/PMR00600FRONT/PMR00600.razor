@page "/PMR00600"
@using PMR00600COMMON.DTO_s
@inherits R_Page

<R_StackLayout Class="p-5">
    @* property *@
    <R_StackLayout Row>
        <R_ItemLayout col="1">
            <R_Label>
                @_localizer["_label_Property"]
            </R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="4">
            <R_ComboBox Data="@_viewModel._properties"
                        Value="@_viewModel._ReportParam.CPROPERTY_ID"
                        ValueField="@nameof(PropertyDTO.CPROPERTY_ID)"
                        TextField="@nameof(PropertyDTO.CPROPERTY_NAME)"
                        ValueChanged="@((string value) => ComboboxPropertyValueChanged(value))"
                        TabIndex="0">
            </R_ComboBox>
        </R_ItemLayout>
        <R_ItemLayout col="6" />
    </R_StackLayout>

    @* hr line *@

    <R_StackLayout Row>
        <R_ItemLayout col="6">

            @* periods *@
            <R_StackLayout>
                <R_Label FontColor="R_eFontColor.Danger" FontStyle="R_eFontStyle.Bold">@_localizer["_label_Period"]</R_Label>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout><R_Label>@_localizer["_label_Year"]</R_Label></R_ItemLayout>
                <R_ItemLayout><R_NumericTextBox @bind-Value="_viewModel._YearPeriod" Max="_viewModel._PeriodYear.IMAX_YEAR" Min="_viewModel._PeriodYear.IMIN_YEAR" ThousandSeparator="false" TabIndex="1" Arrows="true" /></R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>

                @* monthfrom *@
                <R_ItemLayout><R_Label>@_localizer["_label_Month"]</R_Label></R_ItemLayout>
                <R_ItemLayout>
                    <R_ComboBox @bind-Value="@_viewModel._MonthFromPeriod"
                                Data="_viewModel._monthList"
                                ValueField="@nameof(MonthDTO.CNUMBER)"
                                TextField="@nameof(MonthDTO.CNAME)"
                                TabIndex="2" />
                </R_ItemLayout>

                @* monthto *@
                <R_ItemLayout><R_Label>@_localizer["_label_symbol-"]</R_Label></R_ItemLayout>
                <R_ItemLayout>
                    <R_ComboBox @bind-Value="@_viewModel._MonthToPeriod"
                                Data="_viewModel._monthList"
                                ValueField="@nameof(MonthDTO.CNUMBER)"
                                TextField="@nameof(MonthDTO.CNAME)"
                                TabIndex="3" />
                </R_ItemLayout>
            </R_StackLayout>

            @* hr line *@
            <R_StackLayout Class="border-top ps-2 my-3"></R_StackLayout>

            @* Building *@
            <R_StackLayout>
                <R_Label FontColor="R_eFontColor.Danger" FontStyle="R_eFontStyle.Bold">@_localizer["_label_Period"]</R_Label>
            </R_StackLayout>
            @* from building *@
            <R_StackLayout Row>
                <R_ItemLayout col="1">
                    <R_Label>@_localizer["_label_From"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_BUILDING_ID"
                               R_ConductorSource="_conductorRef"
                               Enabled
                               CharacterCasing="R_eCharacterCasing.Upper"
                               MaxLength="int.MaxValue"
                               OnLostFocus="OnLostFocus_LookupFromBuilding"
                               TabIndex="4" />
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupFromBuilding" R_After_Open_Lookup="@AfterOpen_lookupFromBuildingAsync" TabIndex="5">...</R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="4">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_BUILDING_NAME"
                               R_ConductorSource="_conductorRef"
                               Enabled="false" />
                </R_ItemLayout>
            </R_StackLayout>
            @* to building *@
            <R_StackLayout Row>
                <R_ItemLayout col="1">
                    <R_Label>@_localizer["_label_To"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_BUILDING_ID"
                               R_ConductorSource="_conductorRef"
                               Enabled
                               CharacterCasing="R_eCharacterCasing.Upper"
                               MaxLength="int.MaxValue"
                               OnLostFocus="OnLostFocus_LookupToBuilding"
                               TabIndex="6" />
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupToBuilding" R_After_Open_Lookup="@AfterOpen_lookupToBuildingAsync" TabIndex="7">...</R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="4">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_BUILDING_NAME"
                               R_ConductorSource="_conductorRef"
                               Enabled="false" />
                </R_ItemLayout>
            </R_StackLayout>

            @* hr line *@
            <R_StackLayout Class="border-top ps-2 my-3"></R_StackLayout>

            @* Dept *@
            <R_StackLayout Row>
                <R_ItemLayout col="12">
                    <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_label_Department"]</R_Label>
                </R_ItemLayout>
            </R_StackLayout>
            @* from dept *@
            <R_StackLayout Row>
                <R_ItemLayout col="1">
                    <R_Label>@_localizer["_label_From"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_DEPT_CODE"
                               R_ConductorSource="_conductorRef"
                               Enabled
                               CharacterCasing="R_eCharacterCasing.Upper"
                               MaxLength="int.MaxValue"
                               OnLostFocus="OnLostFocus_LookupFromDept"
                               TabIndex="7" />
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupFromDept" R_After_Open_Lookup="@AfterOpen_lookupFromDeptAsync" TabIndex="8">...</R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="4">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CFROM_DEPT_NAME"
                               R_ConductorSource="_conductorRef"
                               Enabled="false" />
                </R_ItemLayout>
            </R_StackLayout>
            @* to dept *@
            <R_StackLayout Row>
                <R_ItemLayout col="1">
                    <R_Label>@_localizer["_label_To"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_DEPT_CODE"
                               R_ConductorSource="_conductorRef"
                               Enabled
                               CharacterCasing="R_eCharacterCasing.Upper"
                               MaxLength="int.MaxValue"
                               OnLostFocus="OnLostFocus_LookupToDept" TabIndex="9" />
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_ConductorSource="_conductorRef" R_Before_Open_Lookup="@BeforeOpen_lookupToDept" R_After_Open_Lookup="@AfterOpen_lookupToDeptAsync" TabIndex="10">...</R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="4">
                    <R_TextBox @bind-Value="_viewModel._ReportParam.CTO_DEPT_NAME"
                               R_ConductorSource="_conductorRef"
                               Enabled="false" />
                </R_ItemLayout>
            </R_StackLayout>

            @* hr line *@
            <R_StackLayout Class="border-top ps-2 my-3"></R_StackLayout>

            @* report & grouping *@
            <R_StackLayout Row>

                @* report type *@
                <R_ItemLayout>
                    <R_StackLayout>
                        <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_label_ReportType"]</R_Label>
                    </R_StackLayout>
                    <R_StackLayout>
                        <R_RadioGroup @ref="@_radioReportType"
                                      Data="@_viewModel._radioReportTypeList"
                                      @bind-Value="@_viewModel._Report_Type"
                                      ValueField="@nameof(ReportTypeDTO.CTYPE_CODE)"
                                      TextField="@nameof(ReportTypeDTO.CTYPE_NAME)"
                                      Layout="R_eRadioGroupLayout.Vertical"
                                      LabelPosition="R_eRadioGroupLabelPosition.After"
                                      TabIndex="11">
                        </R_RadioGroup>
                    </R_StackLayout>
                </R_ItemLayout>

                @* vr line *@
                <R_ItemLayout Class="border-start border-translucent ps-4" />

                @* grouping *@
                <R_ItemLayout>
                    <R_StackLayout>
                        <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_label_Grouping"]</R_Label>
                    </R_StackLayout>
                    <R_StackLayout>
                        <R_RadioGroup @ref="@_radioGroupingType"
                                      Data="@_viewModel._radiogGroupingTypeList"
                                      @bind-Value="@_viewModel._Grouping_Type"
                                      ValueField="@nameof(GroupTypeDTO.CTYPE_CODE)"
                                      TextField="@nameof(GroupTypeDTO.CTYPE_NAME)"
                                      Layout="R_eRadioGroupLayout.Vertical"
                                      LabelPosition="R_eRadioGroupLabelPosition.After"
                                      TabIndex="12">
                        </R_RadioGroup>
                    </R_StackLayout>
                </R_ItemLayout>
            </R_StackLayout>

        </R_ItemLayout>
        <R_ItemLayout Class="border-start border-translucent ps-4" />
        <R_ItemLayout col="6">

        </R_ItemLayout>
    </R_StackLayout>>

    @* hr line *@
    <R_StackLayout Class="border-top ps-2 my-3"></R_StackLayout>

    @* print *@
    <R_StackLayout Row Class="ps-4">
        <R_ItemLayout>
            <R_Button OnClick="@OnclickBtn_Print">@_localizer["_btnPrint"]</R_Button>
        </R_ItemLayout>
    </R_StackLayout>
</R_StackLayout>


