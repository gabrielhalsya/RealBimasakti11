@page "/PMM07500"
@inherits R_Page

<R_StackLayout Class="py-2" Row>
    <R_ItemLayout col="1">
        <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_label_property"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="3">
        <R_ComboBox @ref="@_comboboxProperty"
                    Data="@_stampCodeViewModel.PropertyList"
                    Value="@_stampCodeViewModel.PropertyId"
                    ValueField="@nameof(PropertyDTO.CPROPERTY_ID)"
                    TextField="@nameof(PropertyDTO.CPROPERTY_NAME)"
                    ValueChanged="@((string value) => ComboboxProperty_ValueChangedAsync(value))">
        </R_ComboBox>
    </R_ItemLayout>
    <R_ItemLayout>
        <R_Button OnClick="@RefreshBtn_OnclickAsync">@_localizer["_btn_refresh"]</R_Button>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout>
    <R_ItemLayout>
        <R_Grid @ref="@_gridStampCode"
                DataSource="@_stampCodeViewModel.StampRateList"
                R_ConductorGridSource="@_conStampCode"
                R_GridType="@R_eGridType.Original"
                Height="200px"
                AllowAddNewRow
                AllowDeleteRow
                AllowEditRow
                Pageable
                R_ServiceGetListRecord="@StampCode_ServiceGetListRecord"
                R_ServiceGetRecord="@StampCode_ServiceGetRecord"
                R_Display="@StampCode_RDisplay"
                R_ServiceDelete="@StampCode_ServiceDelete"
                R_AfterAdd="@StampCode_AfterAdd"
                R_Saving="@StampCode_Saving"
                R_ServiceSave="@StampCode_ServiceSave"
                R_CellValueChanged="@StampCode_CellValueChanged">
            <R_GridColumns>
                <R_GridTextColumn FieldName="@nameof(PMM07500GridDTO.CSTAMP_CODE)"
                                  HeaderText="@(_localizer["_column_stamp_code"])"
                                  R_EnableAdd
                                  R_EnableEdit
                                  MaxLength="20"
                                  Width="150px" />

                <R_GridTextColumn FieldName="@nameof(PMM07500GridDTO.CDESCRIPTION)"
                                  HeaderText="@(_localizer["_column_description"])"
                                  R_EnableAdd
                                  R_EnableEdit
                                  MaxLength="100"
                                  Width="200px" />

                <R_GridComboBoxColumn Data=@_stampCodeViewModel.CurrencyList
                                      ValueField="@nameof(CurrencyDTO.CCURRENCY_CODE)"
                                      TextField="@nameof(CurrencyDTO.CCURRENCY_NAME)"
                                      FieldName="@nameof(PMM07500GridDTO.CCURRENCY_NAME)"
                                      HeaderText="@(_localizer["_column_currency"])"
                                      R_EnableAdd
                                      R_EnableEdit
                                      Width="200px" />

                <R_GridTextColumn FieldName="@nameof(PMM07500GridDTO.CUPDATE_BY)"
                                  HeaderText="@(_localizer["_column_update_by"])"
                                  Width="120px"
                                  R_EnableAdd="false"
                                  R_EnableEdit="false"></R_GridTextColumn>
                <R_GridDatePickerColumn FieldName="@nameof(PMM07500GridDTO.DUPDATE_DATE)"
                                        HeaderText="@(_localizer["_column_updated_date"])"
                                        Width="200px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false" />

                <R_GridTextColumn FieldName="@nameof(PMM07500GridDTO.CCREATE_BY)"
                                  HeaderText="@(_localizer["_column_create_by"])"
                                  Width="120px"
                                  R_EnableAdd="false"
                                  R_EnableEdit="false" />

                <R_GridDatePickerColumn FieldName="@nameof(PMM07500GridDTO.DCREATE_DATE)"
                                        HeaderText="@(_localizer["_column_created_date"])"
                                        Width="200px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false" />
            </R_GridColumns>
        </R_Grid>
        <R_ConductorGrid @ref="@_conStampCode"
                         R_SetOther="@StampCode_SetOther"
                         R_IsHeader />
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row>
    <R_ItemLayout col="2">
        <R_Label>@_localizer["_label_stamp_rate"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox Enabled="false" @bind-Value="@_stampCodeViewModel.StampRate.CSTAMP_CODE"></R_TextBox>
    </R_ItemLayout>
    <R_ItemLayout col="4">
        <R_TextBox Enabled="false" @bind-Value="@_stampCodeViewModel.StampRate.CDESCRIPTION"></R_TextBox>
    </R_ItemLayout>
    <R_ItemLayout col="1">
        <R_TextBox Enabled="false" @bind-Value="@_stampCodeViewModel.StampRate.CCURRENCY_CODE"></R_TextBox>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout>
    <R_ItemLayout>
        <R_Grid @ref="@_gridStampDate"
                DataSource="@_stampDateViewModel.StampDateList"
                R_ConductorGridSource="@_conStampDate"
                R_GridType="@R_eGridType.Original"
                Height="200px"
                AllowAddNewRow
                AllowDeleteRow
                Pageable
                R_ServiceGetListRecord="@StampDate_ServiceGetListRecord"
                R_ServiceGetRecord="@StampDate_ServiceGetRecord"
                R_Display="@StampDate_RDisplayAsync"
                R_ServiceDelete="@StampDate_ServiceDelete"
                R_AfterAdd="@StampDate_AfterAdd"
                R_Saving="@StampDate_Saving"
                R_ServiceSave="@StampDate_ServiceSave">
            <R_GridColumns>
                <R_GridDatePickerColumn FieldName="@nameof(PMM07510GridDTO.DDATE)"
                                        HeaderText="@(_localizer["_column_date"])"
                                        R_EnableAdd
                                        R_EnableEdit
                                        Width="200px" DatePickerFormat="@R_eDatePickerFormat.Short" />
                <R_GridTextColumn FieldName="@nameof(PMM07510GridDTO.CUPDATE_BY)"
                                  HeaderText="@(_localizer["_column_update_by"])"
                                  Width="120px"
                                  R_EnableAdd="false"
                                  R_EnableEdit="false"></R_GridTextColumn>
                <R_GridDatePickerColumn FieldName="@nameof(PMM07510GridDTO.DUPDATE_DATE)"
                                        HeaderText="@(_localizer["_column_updated_date"])"
                                        Width="200px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false" />

                <R_GridTextColumn FieldName="@nameof(PMM07510GridDTO.CCREATE_BY)"
                                  HeaderText="@(_localizer["_column_create_by"])"
                                  Width="120px"
                                  R_EnableAdd="false"
                                  R_EnableEdit="false" />

                <R_GridDatePickerColumn FieldName="@nameof(PMM07510GridDTO.DCREATE_DATE)"
                                        HeaderText="@(_localizer["_column_created_date"])"
                                        Width="200px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false" />
            </R_GridColumns>
        </R_Grid>
        <R_ConductorGrid @ref="@_conStampDate"
                         R_SetOther="@StampDate_SetOther"
                         R_ConductorParent="@_conStampCode" />
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row>
    <R_ItemLayout col="2">
        <R_Label>@_localizer["_label_effective_date"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="4">
        <R_DatePicker @bind-Value="@_stampDateViewModel.EffectiveDateDisplay"
                      Enabled="false" />
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout>
    <R_ItemLayout>
        <R_Grid @ref="@_gridStampAmount"
                DataSource="@_stampAmountViewModel.StampAmountList"
                R_ConductorGridSource="@_conStampAmount"
                R_GridType="@R_eGridType.Original"
                Height="200px"
                AllowAddNewRow
                AllowDeleteRow
                AllowEditRow
                Pageable
                R_ServiceGetListRecord="@StampAmount_ServiceGetListRecord"
                R_ServiceGetRecord="@StampAmount_ServiceGetRecord"
                R_Display="@StampAmount_RDisplay"
                R_ServiceDelete="@StampAmount_ServiceDelete"
                R_AfterAdd="@StampAmount_AfterAdd"
                R_Saving="@StampAmount_Saving"
                R_ServiceSave="@StampAmount_ServiceSave">
            <R_GridColumns>
                <R_GridNumericColumn FieldName="@nameof(PMM07520GridDTO.NMIN_AMOUNT)"
                                     HeaderText="@(_localizer["_column_min_amount"])"
                                     R_EnableAdd
                                     R_EnableEdit
                                     Width="200px"
                                     Min="0" />
                <R_GridNumericColumn FieldName="@nameof(PMM07520GridDTO.NSTAMP_AMOUNT)"
                                     HeaderText="@(_localizer["_column_stamp_amount"])"
                                     R_EnableAdd
                                     R_EnableEdit
                                     Width="200px"
                                     Min="0" />
                <R_GridTextColumn FieldName="@nameof(PMM07520GridDTO.CUPDATE_BY)"
                                  HeaderText="@(_localizer["_column_update_by"])"
                                  Width="120px"
                                  R_EnableAdd="false"
                                  R_EnableEdit="false"></R_GridTextColumn>
                <R_GridDatePickerColumn FieldName="@nameof(PMM07520GridDTO.DUPDATE_DATE)"
                                        HeaderText="@(_localizer["_column_updated_date"])"
                                        Width="200px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false" />

                <R_GridTextColumn FieldName="@nameof(PMM07520GridDTO.CCREATE_BY)"
                                  HeaderText="@(_localizer["_column_create_by"])"
                                  Width="120px"
                                  R_EnableAdd="false"
                                  R_EnableEdit="false" />

                <R_GridDatePickerColumn FieldName="@nameof(PMM07520GridDTO.DCREATE_DATE)"
                                        HeaderText="@(_localizer["_column_created_date"])"
                                        Width="200px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false" />
            </R_GridColumns>
        </R_Grid>
        <R_ConductorGrid @ref="@_conStampAmount"
                         R_SetOther="@StampAmount_SetOther"
                         R_ConductorParent="@_conStampCode" />
    </R_ItemLayout>
</R_StackLayout>


